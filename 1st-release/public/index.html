<html>
    <head> 
    <meta charset = "utf-8">
        <title>Meu primeiro jogo Multiplayer </title>

        <style> 
            #screen {
                border : 10px solid #CCC;
                image-rendering: pixelated;
                image-rendering: crisp-edges;
                width: 400px;
                height: 400px;
            }
        </style>
        <script src=" /socket.io/socket.io.js"> </script>
    </head>
    <body> 
        <canvas id = "screen" width = "10" height = "10" > </canvas>

        <script type="module">
                import createKeyBordListener from './keyboard-listener.js' 
                import createGame from './game.js'
                import renderScreen from './renderScreen.js'

                const game = createGame();
                const KeyBordListener = createKeyBordListener(document);
                KeyBordListener.subscrive(game.movePlayer);

                const screen = document.getElementById('screen')
                renderScreen(screen, game, requestAnimationFrame)

                const socket = io()

                socket.on('connect', () => {
                    const playerId = socket.id
                    console.log(`player connected on client with id ${playerId}`)
                })

                socket.on('setup', (state) => {
                    console.log('Reciving setup from server')
                    console.log(state)

                    game.setState(state);
                })

              
        </script> 
    </body>
</html>